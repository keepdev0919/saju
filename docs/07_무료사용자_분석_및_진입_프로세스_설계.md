# 무료 사용자 분석 및 결과 진입 프로세스 설계
## : 신뢰 구축과 유료 전환의 연결 (Standard Free-to-Paid UX)

본 문서는 사용자가 정보를 입력한 후 결제 없이 결과 페이지에 진입하기까지의 과정과 그 설계 의도를 기술합니다. 이 프로세스는 신속한 정보 전달을 통한 서비스 신뢰 확보와, 의도적인 연출을 통한 유료 전환 유도를 목적으로 합니다.

---

### 1. 설계 의도 (Strategic Intent)

1.  **즉각적인 가치 제공 (Immediate Value)**
    *   사용자가 정보를 입력하자마자 명리학적 핵심 데이터(사주팔자 한자, 오행 분포)를 즉시 계산하여 보여줌으로써 서비스의 전문성과 신뢰도를 확보합니다.
2.  **디지털 제의(祭儀)의 구현 (Ritualistic Experience)**
    *   기술적으로는 1초 미만이 소요되는 연산이지만, 사용자가 자신의 운명이 깊이 있게 분석되고 있다는 심리적 무게감을 느낄 수 있도록 의도적인 분석 대기 시간(약 3.5~4초)을 가집니다.
3.  **호기심 자극과 유료 전환 (Curiosity & Conversion)**
    *   기초 데이터는 투명하게 공개하되, 인공지능(AI)을 활용한 심층적인 운세 풀이와 수호신 부적은 '봉인'된 상태(Blur 처리)로 노출하여 사용자의 궁금증을 자극하고 결제를 유도합니다.

---

### 2. 단계별 상세 프로세스

#### STEP 1: 운명의 열쇠 발급 (`/api/auth/register`)
*   **동작**: 사용자 이름, 생년월일 정보를 백엔드로 전송.
*   **핵심 개념 (Token)**: 해당 사용자의 기록을 보호하고 식별할 수 있는 고유한 **`accessToken`**을 발급합니다.
*   **의미**: 이 토큰은 향후 결과 페이지 접근 및 결제 완료 시 데이터 업데이트를 위한 유일한 '인증 열쇠'가 됩니다.

#### STEP 2: 기초 결과각인 (`/api/saju/result-freeuser`)
*   **동작**: 발급된 토큰을 사용하여 라이브러리 기반의 기초 사주 데이터 연산 및 DB 저장.
*   **처리 로직**: `lunar-javascript`를 이용해 만세력 데이터(사주팔자 한자)와 오행(Wuxing) 점수를 산출합니다.
*   **설계 특징**: 이 단계에서는 무거운 비용이 발생하는 AI(LLM) 분석을 수행하지 않아 응답 속도가 매우 빠르며 서버 리소스를 효율적으로 관리합니다.

#### STEP 3: 분석 연출 (Analyzing Animation)
*   **동작**: 프론트엔드에서 프로그레스 바와 신비로운 멘트를 노출.
*   **기술 구현**: 서버 응답이 이미 완료되었더라도 최소 3,500ms의 대기 시간을 보장하여 사용자에게 "분석의 정성"을 시각적으로 전달합니다.

#### STEP 4: 결과 페이지 진입 및 봉인 노출
*   **동작**: `/result/[accessToken]` 경로로 진입.
*   **UX 구성**:
    *   **공개 영역**: 사주팔자(한자), 오행 조화도(레이더 차트), 종합 운세 점수.
    *   **봉인 영역 (isPaid: false)**: 총평 상세, 재물/애정/직장/건강운 상세 풀이, 수호신령 카드.
*   **의미**: "이미 당신에 대한 결과는 분석 완료되어 보관소에 들어있으며, 인연(결제)을 맺으면 즉시 봉인이 풀린다"는 메시지를 전달합니다.

---

### 3. 기술적 특징 요약 (Technical Summary)

| 항목 | 상세 내용 |
| :--- | :--- |
| **인증 방식** | AccessToken 기반 권한 제어 (IDOR 방지) |
| **API 명칭** | `result-freeuser` (무료 사용자의 첫 결과 생성 목적 명시) |
| **연산 방식** | Library-only (Fast) -> AI Interpretation (Post-payment) |
| **상태 관리** | 업계 표준에 따라 API 응답값을 직접 인자로 전달하여 비동기 레이스 컨디션 방지 |

---
**업데이트 날짜**: 2025년 12월 20일
**작성자**: Antigravity (Advanced AI Coding Assistant)
